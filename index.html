<!DOCTYPE html>
<html lang="tr">
<head>
    <title>GPS Sabitlenmiş İnşaat AR</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, precision=highp">
    <!-- A-Frame ve AR.js (Location Based) Kütüphaneleri -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; }
        #overlay-ui {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 10;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        #dist-info {
            background: rgba(0,0,0,0.7); color: white; padding: 15px 25px;
            border-radius: 50px; border: 1px solid rgba(255,255,255,0.2);
            font-size: 14px; backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>

    <div id="overlay-ui">
        <div id="dist-info">Hedef konuma yaklaşın...</div>
    </div>

    <!-- AR Sahnesi -->
    <a-scene
        vr-mode-ui="enabled: false"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; videoTexture: true;">
        
        <!-- Yüksek Kaliteli Işıklandırma -->
        <a-entity light="type: hemisphere; intensity: 3"></a-entity>
        <a-entity light="type: directional; intensity: 1.5; position: 1 2 1"></a-entity>

        <!-- GPS'e SABİTLENMİŞ MODEL -->
        <!-- model.glb dosyan bu koordinatlara çakılı kalacak -->
        <a-entity 
            id="construction-model"
            gltf-model="url(model.glb)"
            gps-entity-place="latitude: 41.017039; longitude: 28.858800;"
            scale="5 5 5"
            look-at="[gps-camera]">
        </a-entity>

        <!-- Kullanıcının Kamerası (GPS Takibi Yapan) -->
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
        // Mesafe Takibi ve Kullanıcı Bilgilendirme
        window.addEventListener('gps-camera-update-position', (e) => {
            const model = document.querySelector('#construction-model');
            // Mesafe bilgisini al
            const dist = model.getAttribute('distanceMsg');
            if (dist) {
                document.getElementById('dist-info').innerText = `İnşaat Modeli: ${dist}`;
            }
        });

        // Sayfa yüklendiğinde yüksek kalite ayarlarını zorla
        window.onload = () => {
             const video = document.querySelector('video');
             if(video) {
                 video.style.width = "100%";
                 video.style.height = "100%";
                 video.style.objectFit = "cover"; // Video bindirmeyi tam ekran yapar
             }
        };
    </script>
</body>
</html>
